<!DOCTYPE html>
<html>
  <head>
    <title>Razorpay Payment</title>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: "Poppins", sans-serif;
        background: #0f172a;
        color: white;
      }
      .hero {
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        text-align: center;
      }
      .hero h1 {
        font-size: 80px;
        font-weight: bold;
        margin-bottom: 10px;
        letter-spacing: 2px;
      }
      .hero h2 {
        font-size: 28px;
        font-weight: 400;
        margin-bottom: 20px;
        color: #d1d5db;
      }
      /* Input box */
      #amount {
        padding: 12px;
        width: 200px;
        font-size: 16px;
        border-radius: 5px;
        border: none;
        text-align: center;
        margin-bottom: 20px;
      }
      /* Pay Button */
      #pay-btn {
        background: #ff914d;
        border: none;
        padding: 15px 40px;
        font-size: 18px;
        color: white;
        cursor: pointer;
        border-radius: 5px;
        font-weight: bold;
        transition: 0.3s;
      }
      #pay-btn:hover {
        background: #ff6a00;
        transform: scale(1.05);
      }
      /* MEdia query */
      @media (max-width: 480px) {
        .hero {
          padding: 20px;
        }
        .hero h1 {
          font-size: 55px; /* Bada kiya */
        }
        .hero h2 {
          font-size: 24px;
          margin-bottom: 25px;
        }
        #amount {
          width: 90%; /* Full width for mobile */
          max-width: 300px; /* But limit */
          font-size: 18px;
          padding: 14px;
        }
        #pay-btn {
          width: 90%; /* Full width for mobile */
          max-width: 300px;
          padding: 14px 0;
          font-size: 18px;
        }
      }

      /* Very Small Phones */
      @media (max-width: 360px) {
        .hero h1 {
          font-size: 48px;
        }
        .hero h2 {
          font-size: 20px;
        }
        #amount {
          width: 95%;
          font-size: 16px;
          padding: 12px;
        }
        #pay-btn {
          width: 95%;
          padding: 12px 0;
          font-size: 17px;
        }
      }
    </style>
  </head>
  <body>
    <div class="hero">
      <h1>RAZORPAY</h1>
      <h2>Payment Gateway</h2>
      <input type="number" id="amount" placeholder="Enter amount ₹" min="1" />
      <button id="pay-btn">Pay Now</button>
    </div>

    <script>
      document.getElementById("pay-btn").onclick = async function () {
        let amountInput = document.getElementById("amount").value;
        if (!amountInput || amountInput <= 0) {
          alert("Please enter a valid amount");
          return;
        }

        // Convert ₹ to paise (multiply by 100)
        let amountInPaise = amountInput * 100;

        const Lurl = "http://127.0.0.1:8000";
        const response = await fetch(`${Lurl}/create-order`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: "Bearer YOUR_TOKEN", // apna token lagao
          },
          body: JSON.stringify({
            amount: amountInPaise,
            currency: "INR",
            receipt: "BOOKING_683ddbd8819f10de2dbbd025",
          }),
        });

        const order = await response.json();
        const options = {
          key: "rzp_test_WfU34ZmSyXYxQW",
          amount: order.amount,
          currency: order.currency,
          name: "My Shop",
          description: "Custom Amount Payment",
          order_id: order.id,
          handler: async function (response) {
            const verifyRes = await fetch(`${Lurl}/verify-payment`, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                Authorization: "Bearer YOUR_TOKEN",
              },
              body: JSON.stringify(response),
            });

            const verifyJSON = await verifyRes.json();

            if (verifyJSON.status.toLowerCase() === "success") {
              document.body.innerHTML = `
                <div class="hero">
                  <h1 style="color: #4CAF50; font-size: 60px;">Razorpay Payment</h1>
                  <h2 style="color: white; font-size: 30px;">Payment of ₹${amountInput} Done Successfully ✅</h2>
                  <p style="color: #ddd; font-size: 20px;">Thank you for your payment.</p>
                </div>
              `;
            } else {
              alert("Payment Failed");
            }
          },
          theme: {
            color: "#3399cc",
          },
        };

        const rzp = new Razorpay(options);
        rzp.open();
      };
    </script>
  </body>
</html>
